<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TicketPro â€“ Help Desk Training</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d1117;
    --surface: #161b22;
    --surface2: #1c2330;
    --border: #30363d;
    --accent: #00d4aa;
    --accent2: #ff6b35;
    --warn: #f0a500;
    --text: #e6edf3;
    --muted: #8b949e;
    --good: #3fb950;
    --bad: #f85149;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'IBM Plex Sans', sans-serif;
    min-height: 100vh;
  }

  /* HEADER */
  header {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: 16px 32px;
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .logo {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--accent);
    letter-spacing: -0.5px;
  }
  .logo span { color: var(--text); }
  .badge {
    background: var(--accent2);
    color: #fff;
    font-size: 0.65rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 99px;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .score-display {
    margin-left: auto;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.85rem;
    color: var(--muted);
  }
  .score-display strong { color: var(--accent); font-size: 1.1rem; }

  /* MAIN LAYOUT */
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 32px 24px;
  }

  /* SCENARIO CARD */
  .scenario-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-left: 4px solid var(--accent2);
    border-radius: 8px;
    padding: 24px;
    margin-bottom: 28px;
    position: relative;
  }
  .scenario-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--accent2);
    margin-bottom: 12px;
  }
  .ticket-type-badge {
    position: absolute;
    top: 20px;
    right: 20px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 4px 12px;
    font-size: 0.75rem;
    color: var(--muted);
    font-family: 'IBM Plex Mono', monospace;
  }
  .scenario-text {
    font-size: 1.05rem;
    line-height: 1.7;
    color: var(--text);
  }
  .caller-info {
    margin-top: 16px;
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }
  .info-chip {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 14px;
    font-size: 0.8rem;
    color: var(--muted);
  }
  .info-chip strong { color: var(--text); }

  /* TICKET FORM */
  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }
  @media (max-width: 650px) { .form-grid { grid-template-columns: 1fr; } }
  .form-full { grid-column: 1 / -1; }

  .field-group { display: flex; flex-direction: column; gap: 6px; }
  label {
    font-size: 0.75rem;
    font-family: 'IBM Plex Mono', monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--muted);
  }
  label .req { color: var(--accent2); }

  input[type="text"], select, textarea {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 10px 14px;
    color: var(--text);
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 0.95rem;
    transition: border-color 0.2s;
    width: 100%;
  }
  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
  }
  select option { background: var(--surface2); }
  textarea { resize: vertical; min-height: 140px; line-height: 1.6; }

  /* BUTTONS */
  .btn-row { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 8px; }
  button {
    font-family: 'IBM Plex Sans', sans-serif;
    font-weight: 500;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
    padding: 10px 22px;
    font-size: 0.9rem;
  }
  .btn-primary {
    background: var(--accent);
    color: #0d1117;
  }
  .btn-primary:hover { background: #00b899; }
  .btn-secondary {
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--text);
  }
  .btn-secondary:hover { border-color: var(--accent); color: var(--accent); }
  .btn-next {
    background: var(--accent2);
    color: #fff;
    margin-left: auto;
  }
  .btn-next:hover { background: #e5602e; }

  /* FEEDBACK PANEL */
  .feedback-panel {
    display: none;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 24px;
    margin-top: 24px;
    animation: fadeIn 0.3s ease;
  }
  .feedback-panel.show { display: block; }
  @keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

  .feedback-title {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--muted);
    margin-bottom: 16px;
  }

  .score-circle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 72px;
    height: 72px;
    border-radius: 50%;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 1.4rem;
    font-weight: 600;
    border: 3px solid;
    margin-bottom: 16px;
  }
  .score-a { border-color: var(--good); color: var(--good); background: rgba(63,185,80,0.1); }
  .score-b { border-color: var(--warn); color: var(--warn); background: rgba(240,165,0,0.1); }
  .score-c { border-color: var(--bad); color: var(--bad); background: rgba(248,81,73,0.1); }

  .check-list { list-style: none; display: flex; flex-direction: column; gap: 8px; }
  .check-list li {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: 0.9rem;
    line-height: 1.5;
  }
  .check-list li .icon { font-size: 1rem; margin-top: 1px; flex-shrink: 0; }
  .pass .icon { color: var(--good); }
  .fail .icon { color: var(--bad); }
  .warn-item .icon { color: var(--warn); }

  .model-answer {
    margin-top: 20px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
  }
  .model-answer h4 {
    font-size: 0.75rem;
    font-family: 'IBM Plex Mono', monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--accent);
    margin-bottom: 12px;
  }
  .model-field { margin-bottom: 8px; font-size: 0.88rem; }
  .model-field .mf-label { color: var(--muted); font-weight: 500; }
  .model-field .mf-val { color: var(--text); }

  /* PROGRESS */
  .progress-bar-wrap {
    background: var(--surface2);
    border-radius: 99px;
    height: 4px;
    margin-bottom: 24px;
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), #00a8d4);
    border-radius: 99px;
    transition: width 0.4s ease;
  }

  /* TIP BOX */
  .tip-box {
    background: rgba(0,212,170,0.07);
    border: 1px solid rgba(0,212,170,0.2);
    border-radius: 8px;
    padding: 12px 16px;
    font-size: 0.85rem;
    color: var(--muted);
    margin-bottom: 20px;
    line-height: 1.6;
  }
  .tip-box strong { color: var(--accent); }

  /* COMPLETE SCREEN */
  #complete-screen {
    display: none;
    text-align: center;
    padding: 60px 20px;
  }
  #complete-screen h2 {
    font-size: 2rem;
    margin-bottom: 16px;
    font-weight: 700;
  }
  #complete-screen p { color: var(--muted); margin-bottom: 32px; font-size: 1.05rem; }
  .final-score {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 3.5rem;
    color: var(--accent);
    font-weight: 600;
    margin: 20px 0;
  }

  .section-divider {
    height: 1px;
    background: var(--border);
    margin: 20px 0;
  }
</style>
</head>
<body>

<header>
  <div class="logo">Ticket<span>Pro</span></div>
  <div class="badge">Training Tool</div>
  <div class="score-display">Score: <strong id="header-score">0</strong> pts</div>
</header>

<div class="container">

  <div class="progress-bar-wrap">
    <div class="progress-bar-fill" id="progress-bar" style="width:0%"></div>
  </div>

  <div id="practice-section">

    <div class="scenario-card">
      <div class="scenario-label">ðŸ“ž Incoming Call â€” Scenario <span id="scenario-num">1</span> of <span id="scenario-total">15</span></div>
      <div class="ticket-type-badge" id="ticket-type-badge">Handle Call</div>
      <div class="scenario-text" id="scenario-text"></div>
      <div class="caller-info" id="caller-info"></div>
    </div>

    <div class="tip-box" id="tip-box"></div>

    <form id="ticket-form" onsubmit="return false;">
      <div class="form-grid">
        <div class="field-group">
          <label>Subject / Title <span class="req">*</span></label>
          <input type="text" id="f-subject" placeholder="Brief, clear description of the issue..." />
        </div>
        <div class="field-group">
          <label>Priority <span class="req">*</span></label>
          <select id="f-priority">
            <option value="">-- Select Priority --</option>
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
            <option>Critical</option>
          </select>
        </div>
        <div class="field-group">
          <label>Category <span class="req">*</span></label>
          <select id="f-category">
            <option value="">-- Select Category --</option>
            <option>Hardware</option>
            <option>Software</option>
            <option>Network / Connectivity</option>
            <option>Account / Password</option>
            <option>Email</option>
            <option>Printer</option>
            <option>Phone / Handle Call</option>
            <option>Other</option>
          </select>
        </div>
        <div class="field-group">
          <label>User Impact</label>
          <select id="f-impact">
            <option value="">-- Select Impact --</option>
            <option>User unable to work</option>
            <option>User can partially work</option>
            <option>Minor inconvenience</option>
            <option>Multiple users affected</option>
            <option>No immediate impact</option>
          </select>
        </div>
        <div class="field-group form-full">
          <label>Full Description <span class="req">*</span></label>
          <textarea id="f-desc" placeholder="Describe the issue in detail. Include: What happened, when it started, what was already tried, and any error messages..."></textarea>
        </div>
        <div class="field-group">
          <label>Steps Already Taken</label>
          <input type="text" id="f-steps" placeholder="e.g. Restarted PC, checked cables..." />
        </div>
        <div class="field-group">
          <label>Resolution / Next Action</label>
          <input type="text" id="f-action" placeholder="e.g. Dispatched tech, escalated to Tier 2..." />
        </div>
      </div>

      <div class="btn-row">
        <button class="btn-primary" onclick="submitTicket()">âœ“ Submit Ticket</button>
        <button class="btn-secondary" onclick="clearForm()">Clear</button>
        <button class="btn-secondary" onclick="showHint()">ðŸ’¡ Hint</button>
        <button class="btn-next" onclick="nextScenario()" id="btn-next" style="display:none">Next Scenario â†’</button>
      </div>
    </form>

    <div class="feedback-panel" id="feedback-panel">
      <div class="feedback-title">Ticket Review</div>
      <div id="score-circle-wrap"></div>
      <ul class="check-list" id="check-list"></ul>
      <div class="model-answer" id="model-answer"></div>
    </div>

  </div>

  <div id="complete-screen">
    <div style="font-size:3rem;">ðŸŽ‰</div>
    <h2>Training Complete!</h2>
    <p>You finished all 15 practice scenarios.</p>
    <div class="final-score" id="final-score-display"></div>
    <p id="final-message"></p>
    <div style="height:24px"></div>
    <button class="btn-primary" onclick="restartApp()" style="font-size:1rem;padding:14px 32px;">Practice Again</button>
  </div>

</div>

<script>
const scenarios = [
  {
    type: "Handle Call",
    accentColor: "#ff6b35",
    text: `A user calls in sounding frustrated. She says her computer has been running very slowly all morning and she can barely open any programs. She says it started after she came in today and turned it on. She has not restarted it yet. She is in the Sales department and has a deadline this afternoon.`,
    caller: { name: "Maria Lopez", ext: "3312", dept: "Sales", location: "Building A, Desk 14" },
    tip: `<strong>Tip:</strong> Slow computer tickets need: what "slow" means to the user, when it started, department (impacts priority), and whether basic fixes were tried. Sales with a deadline = Higher priority.`,
    ideal: {
      subject: "PC running slow â€“ User unable to meet deadline",
      priority: "High",
      category: "Hardware",
      impact: "User can partially work",
      desc: "User Maria Lopez (Ext. 3312, Sales Dept., Building A Desk 14) called reporting her desktop PC has been running very slowly since she arrived this morning. Unable to open programs normally. Issue began at start of shift â€” no restart attempted yet. User has a deadline this afternoon.",
      steps: "Advised user to save work and restart PC",
      action: "Monitoring for update; if issue persists after restart, dispatch tech"
    },
    checks: [
      { key: "subject_descriptive", label: "Subject is specific (not just 'computer issue')", test: (f) => f.subject.length > 10 && !['computer issue','issue','problem','help'].includes(f.subject.toLowerCase()) },
      { key: "priority_correct", label: "Priority set to High (deadline + Sales dept)", test: (f) => f.priority === "High" },
      { key: "category", label: "Category selected", test: (f) => f.category !== "" },
      { key: "desc_who", label: "Description includes user name or identifier", test: (f) => f.desc.length > 0 && (f.desc.toLowerCase().includes('maria') || f.desc.toLowerCase().includes('lopez') || f.desc.toLowerCase().includes('3312') || f.desc.toLowerCase().includes('sales')) },
      { key: "desc_what", label: "Description explains what 'slow' means (can't open programs, etc.)", test: (f) => f.desc.length > 40 },
      { key: "desc_when", label: "Description mentions when it started", test: (f) => /morn|today|start|since|this am/i.test(f.desc) },
      { key: "steps_tried", label: "Notes what has or hasn't been tried", test: (f) => f.steps.length > 3 || /restart|reboot|tried|checked|not yet/i.test(f.desc) },
    ]
  },
  {
    type: "Incident Ticket",
    accentColor: "#f85149",
    text: `You receive 4 calls in 10 minutes from different users in the Marketing department. All of them say they cannot access the company shared drive. They get an error that says "Network path not found." IT has not sent any maintenance notices. This appears to be a widespread outage affecting at least 4 people.`,
    caller: { name: "Multiple Users", ext: "Various", dept: "Marketing", location: "3rd Floor" },
    tip: `<strong>Tip:</strong> When multiple users are affected, this is an INCIDENT not just a single ticket. Priority should be High or Critical. Make sure to note the number of affected users and the exact error message in the description.`,
    ideal: {
      subject: "INCIDENT: Shared drive inaccessible â€“ Marketing dept, 4+ users affected",
      priority: "Critical",
      category: "Network / Connectivity",
      impact: "Multiple users affected",
      desc: "Multiple users (4+) in Marketing (3rd Floor) reporting inability to access company shared drive. Error message: 'Network path not found.' Issue began approx. 10:15 AM. No scheduled maintenance noted. Users are unable to access files needed for work. Calls received within 10-minute window â€” likely a broader outage.",
      steps: "Confirmed issue with multiple callers; no maintenance window scheduled",
      action: "Escalated to Tier 2 Network team; users advised to work locally until resolved"
    },
    checks: [
      { key: "subject_incident", label: "Subject indicates this is a widespread issue / incident", test: (f) => /incident|multiple|outage|4|sever|wide/i.test(f.subject) || f.impact === "Multiple users affected" },
      { key: "priority_critical", label: "Priority set to High or Critical", test: (f) => f.priority === "Critical" || f.priority === "High" },
      { key: "impact_multi", label: "User Impact marked as Multiple users affected", test: (f) => f.impact === "Multiple users affected" },
      { key: "error_message", label: "Exact error message included in description", test: (f) => /network path|path not found/i.test(f.desc) },
      { key: "user_count", label: "Number of affected users mentioned", test: (f) => /4|four|multiple|several/i.test(f.desc) },
      { key: "escalated", label: "Ticket notes escalation or next action", test: (f) => f.action.length > 5 || /escalat|tier 2|network team/i.test(f.desc) },
    ]
  },
  {
    type: "Password Reset",
    accentColor: "#3fb950",
    text: `A user calls in and says he is locked out of his Windows account. He tried logging in this morning and got a message saying "Your account has been locked." He has an important meeting in 30 minutes and needs access urgently. He verified his identity by giving you his employee ID and last 4 of his Social Security Number per company policy.`,
    caller: { name: "David Kim", ext: "5509", dept: "Finance", location: "Remote â€“ Working from Home" },
    tip: `<strong>Tip:</strong> Password/lockout tickets must note HOW the user was verified before any action is taken. This is a security and audit requirement. Also note the time-sensitive nature (meeting in 30 min).`,
    ideal: {
      subject: "Account locked out â€“ User verified, urgent (meeting in 30 min)",
      priority: "High",
      category: "Account / Password",
      impact: "User unable to work",
      desc: "User David Kim (Ext. 5509, Finance, Remote) called reporting Windows account lockout. Error message: 'Your account has been locked.' Issue started this morning at login. User has a meeting in 30 minutes. Identity verified per policy: Employee ID and last 4 of SSN confirmed.",
      steps: "Verified user identity per company policy before proceeding",
      action: "Account unlocked in Active Directory; advised user to update password"
    },
    checks: [
      { key: "subject_clear", label: "Subject clearly states account lockout", test: (f) => /lock|account|password/i.test(f.subject) },
      { key: "priority_high", label: "Priority is High (urgent meeting)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "category_account", label: "Category set to Account / Password", test: (f) => f.category === "Account / Password" },
      { key: "verified", label: "CRITICAL: Notes how identity was verified before access granted", test: (f) => /verif|employee id|ssn|confirm|id/i.test(f.desc) || /verif/i.test(f.steps) },
      { key: "urgency_noted", label: "Urgency noted (meeting in 30 min)", test: (f) => /meet|30|urgent/i.test(f.desc) || f.priority === "High" || f.priority === "Critical" },
    ]
  },
  {
    type: "Desktop Support",
    accentColor: "#00d4aa",
    text: `A user walks up to the help desk and says her monitor suddenly went black during normal use. The computer itself seems to still be running (she can hear it). She already tried pressing the monitor power button and nothing happened. She has been using this same setup for 2 years with no issues. She needs her workstation to complete payroll today.`,
    caller: { name: "Sandra Brooks", ext: "2201", dept: "HR / Payroll", location: "Building B, Desk 7" },
    tip: `<strong>Tip:</strong> Hardware tickets need you to document what was already tried, rule out simple causes (like cable or power), and note business impact. Payroll = time-sensitive, bump priority up.`,
    ideal: {
      subject: "Monitor black screen â€“ HR user unable to complete payroll",
      priority: "High",
      category: "Hardware",
      impact: "User unable to work",
      desc: "User Sandra Brooks (Ext. 2201, HR/Payroll, Building B Desk 7) reported monitor going black during normal use. PC appears to still be running (audible fan/sounds). Monitor power button pressed â€” no response. Setup has been in use 2 years with no prior issues. User must complete payroll today.",
      steps: "Pressed monitor power button â€“ no response. Checked power cable connection.",
      action: "Dispatched on-site tech to inspect monitor and cables; may need replacement monitor"
    },
    checks: [
      { key: "subject_hardware", label: "Subject describes the actual hardware problem", test: (f) => /monitor|screen|black|display/i.test(f.subject) },
      { key: "priority_high", label: "Priority set to High (payroll deadline)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "impact_down", label: "Impact marked as user unable to work", test: (f) => f.impact === "User unable to work" },
      { key: "pc_running", label: "Notes that PC is still running (helps narrow diagnosis)", test: (f) => /pc|computer|running|hear|fan|still on/i.test(f.desc) },
      { key: "steps_tried", label: "Documents what the user already tried", test: (f) => /press|button|power|tried|cable/i.test(f.steps) || /press|button|power|tried/i.test(f.desc) },
      { key: "business_impact", label: "Notes business urgency (payroll)", test: (f) => /payroll|deadline|today|urgent|hr/i.test(f.desc) },
    ]
  },
  {
    type: "Software / Email",
    accentColor: "#a371f7",
    text: `A user calls and says Outlook keeps crashing every time he tries to open it. It shows a brief loading screen then just closes. He needs email access for an external client call in 2 hours. He is using Windows 10 and says he already tried restarting his computer twice but the issue persists. He does not know if there were any updates recently.`,
    caller: { name: "Tom Nguyen", ext: "7743", dept: "Client Services", location: "Building C, Desk 22" },
    tip: `<strong>Tip:</strong> Software crash tickets should always include the OS version, app name and version if known, exact behavior (crashes on open vs. crashes during use), and what troubleshooting was already done. A client call coming up = time sensitive.`,
    ideal: {
      subject: "Outlook crashing on open â€“ Client Services, client call in 2 hrs",
      priority: "High",
      category: "Email",
      impact: "User unable to work",
      desc: "User Tom Nguyen (Ext. 7743, Client Services, Building C Desk 22) reports Microsoft Outlook crashes every time he attempts to open it. App shows loading screen briefly then closes. Restarted PC twice â€” issue persists. OS: Windows 10. No known recent updates. User has external client call in 2 hours and requires email access.",
      steps: "PC restarted twice â€“ Outlook still crashes on open",
      action: "Attempted Outlook repair via Control Panel; if unsuccessful, escalate to Tier 2 software team"
    },
    checks: [
      { key: "subject_app", label: "Subject names the application (Outlook)", test: (f) => /outlook|email/i.test(f.subject) },
      { key: "priority_high", label: "Priority is High (client call in 2 hours)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "category_email", label: "Category is Email or Software", test: (f) => f.category === "Email" || f.category === "Software" },
      { key: "behavior_described", label: "Exact behavior described (crashes on open)", test: (f) => /crash|close|open|load/i.test(f.desc) },
      { key: "os_noted", label: "OS or environment noted (Windows 10)", test: (f) => /windows|win 10|w10|os/i.test(f.desc) },
      { key: "steps_restart", label: "Documents restart attempts", test: (f) => /restart|reboot|twice|2 times/i.test(f.steps) || /restart|reboot/i.test(f.desc) },
      { key: "urgency", label: "Client call urgency noted", test: (f) => /client|call|2 hour|two hour/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 6: VDI WON'T LAUNCH â”€â”€
  {
    type: "VDI / Remote Desktop",
    accentColor: "#a371f7",
    text: `A remote worker calls in saying she cannot get into her virtual desktop. She clicks the VDI icon, it tries to connect, then shows the error: "Cannot Start Desktop." She works from home every day and this is her only way to access company systems. She has not been able to work at all since she logged on this morning. She already tried closing and reopening the app.`,
    caller: { name: "Priya Patel", ext: "Remote / Cell: 555-0182", dept: "Operations", location: "Remote â€“ Work From Home" },
    tip: `<strong>Tip:</strong> VDI tickets need the exact error, the user's OS, and whether this is a first-time issue or recurring. Remote workers with no access = High priority because they have zero workaround. Always note whether other remote users are affected â€” it might be a broader outage.`,
    ideal: {
      subject: "VDI won't launch â€“ Remote user fully down, Error: Cannot Start Desktop",
      priority: "High",
      category: "Network / Connectivity",
      impact: "User unable to work",
      desc: "Remote user Priya Patel (Cell: 555-0182, Operations, WFH) unable to launch virtual desktop. Error message: 'Cannot Start Desktop.' Issue started at login this morning. User has no access to any company systems. App closed and reopened â€” issue persists. This is user's only method of accessing company environment. Need to determine if issue is isolated or affecting other remote users.",
      steps: "User closed and reopened VDI app â€“ error persists. Checked if other remote users are affected.",
      action: "Escalated to Tier 2 / VDI team. User advised to standby. Ticket flagged as potential broader outage."
    },
    checks: [
      { key: "subject_vdi", label: "Subject mentions VDI or remote desktop issue", test: (f) => /vdi|virtual|remote|desktop/i.test(f.subject) },
      { key: "error_msg", label: "Exact error message included: 'Cannot Start Desktop'", test: (f) => /cannot start|start desktop/i.test(f.desc) },
      { key: "priority_high", label: "Priority set to High (fully down, no workaround)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "impact_down", label: "Impact marked as user unable to work", test: (f) => f.impact === "User unable to work" },
      { key: "remote_noted", label: "Notes user is remote / WFH with no other access", test: (f) => /remote|home|wfh|only way|no access/i.test(f.desc) },
      { key: "steps_tried", label: "Documents troubleshooting already done", test: (f) => /close|reopen|restart|relaunch/i.test(f.steps) || /close|reopen|restart/i.test(f.desc) },
      { key: "broader_check", label: "Notes whether other users might be affected", test: (f) => /other|broader|outage|multiple|additional/i.test(f.desc) || /other/i.test(f.steps) },
    ]
  },

  // â”€â”€ SCENARIO 7: CANNOT REACH COMPANY WEBSITE â”€â”€
  {
    type: "Network / Connectivity",
    accentColor: "#58a6ff",
    text: `A user calls saying he cannot get to the company website or the internal employee portal. Every time he tries, he gets the error: "Site can't be reached." He is working from his office on his work laptop. Other websites seem to work fine â€” he can get to Google with no problem. He needs to access the portal to submit his timesheet, which is due today.`,
    caller: { name: "Marcus Webb", ext: "4417", dept: "Logistics", location: "Building D, Desk 3" },
    tip: `<strong>Tip:</strong> When SOME sites work and others don't, it points to a DNS issue, a blocked site, a firewall rule, or a problem specific to that server â€” NOT a full internet outage. Make sure to note which sites work and which don't. That detail is exactly what Tier 2 needs.`,
    ideal: {
      subject: "Cannot reach company website/portal â€“ Error: Site can't be reached, timesheet due today",
      priority: "High",
      category: "Network / Connectivity",
      impact: "User unable to work",
      desc: "User Marcus Webb (Ext. 4417, Logistics, Building D Desk 3) reports inability to access company website and internal employee portal. Error: 'Site can't be reached.' Other websites functional (confirmed Google loads). Issue appears site-specific, not a full outage. User needs portal access to submit timesheet due today. Working from office on work laptop.",
      steps: "Confirmed other websites load. Cleared browser cache. Tried different browser â€” same result.",
      action: "Escalated to Tier 2 / Networking. Possible DNS issue or firewall block on specific URLs."
    },
    checks: [
      { key: "subject_site", label: "Subject describes the specific issue (can't reach site/portal)", test: (f) => /site|portal|website|reach|access/i.test(f.subject) },
      { key: "error_msg", label: "Exact error included: 'Site can't be reached'", test: (f) => /site can't|can't be reached|cant be reached/i.test(f.desc) },
      { key: "other_sites", label: "Notes that other websites DO work (key diagnostic detail)", test: (f) => /other|google|works|functional|some sites/i.test(f.desc) },
      { key: "urgency", label: "Timesheet deadline urgency noted", test: (f) => /timesheet|due|deadline|today/i.test(f.desc) },
      { key: "priority_correct", label: "Priority is High (deadline today)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "browser_tried", label: "Documents whether different browser was tried", test: (f) => /browser|chrome|edge|firefox|cache/i.test(f.steps) || /browser|cache/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 8: VPN WON'T CONNECT â”€â”€
  {
    type: "VPN / Remote Access",
    accentColor: "#f0a500",
    text: `A user calls from home and says his VPN won't connect. He gets the error: "Login failed." He has been working remotely for months with no issues. He says he did recently change his network password yesterday after being prompted to. Without VPN he cannot access any company resources and has a team meeting in 45 minutes where he needs to share files.`,
    caller: { name: "Kevin Okafor", ext: "Remote / Cell: 555-0247", dept: "Engineering", location: "Remote â€“ Work From Home" },
    tip: `<strong>Tip:</strong> "Login failed" on VPN after a password change almost always means the user needs to update their saved VPN credentials with the new password. This is one of the most common VPN issues agents see. Always ask: did anything change recently? A password change is the #1 cause.`,
    ideal: {
      subject: "VPN login failed after password change â€“ Remote user, team meeting in 45 min",
      priority: "High",
      category: "Network / Connectivity",
      impact: "User unable to work",
      desc: "Remote user Kevin Okafor (Cell: 555-0247, Engineering, WFH) reports VPN will not connect. Error: 'Login failed.' User changed network password yesterday after system prompt. No VPN issues prior to password change. User cannot access any company resources. Team meeting in 45 minutes requiring file access. Likely cause: VPN client still using old credentials.",
      steps: "Advised user to update VPN credentials with new password and retry connection.",
      action: "If credential update does not resolve: escalate to Tier 2 / Network team for VPN authentication check."
    },
    checks: [
      { key: "subject_vpn", label: "Subject mentions VPN and the error or cause", test: (f) => /vpn/i.test(f.subject) },
      { key: "error_msg", label: "Exact error included: 'Login failed'", test: (f) => /login failed|login fail/i.test(f.desc) },
      { key: "password_change", label: "CRITICAL: Password change documented as likely cause", test: (f) => /password|credential|changed|change/i.test(f.desc) },
      { key: "priority_high", label: "Priority is High (meeting in 45 min, fully locked out)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "urgency", label: "Meeting urgency noted in ticket", test: (f) => /meeting|45|team|urgent/i.test(f.desc) },
      { key: "steps_taken", label: "Documents fix attempted (update VPN credentials)", test: (f) => /credential|password|update|new password/i.test(f.steps) || /credential|update/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 9: BITLOCKER LOCKOUT â”€â”€
  {
    type: "Security / BitLocker",
    accentColor: "#f85149",
    text: `A user calls in a panic saying her laptop is asking for a BitLocker recovery key and she has no idea what that is. She says she just turned on her laptop like normal this morning and instead of her login screen, she got a blue screen asking for a 48-digit recovery key. She does not have the key. She is in the Accounting department and has payroll reports to run this morning.`,
    caller: { name: "Diane Foster", ext: "2289", dept: "Accounting", location: "Building A, Desk 21" },
    tip: `<strong>Tip:</strong> BitLocker recovery screens are a SECURITY event, not just a tech issue. The key is stored in Active Directory or Azure AD â€” Tier 2 or a senior tech must retrieve it. You cannot just give the key to anyone who asks â€” you must verify identity first. Set this as Critical because Accounting + payroll = business-critical.`,
    ideal: {
      subject: "CRITICAL: BitLocker recovery key prompt on startup â€“ Accounting, payroll impacted",
      priority: "Critical",
      category: "Hardware",
      impact: "User unable to work",
      desc: "User Diane Foster (Ext. 2289, Accounting, Building A Desk 21) reports laptop prompted for BitLocker recovery key on startup this morning instead of normal login screen. Blue screen requesting 48-digit recovery key. User does not have key. No known changes made to laptop. User has payroll reports due this morning â€” fully locked out of device. Identity verified before any action taken.",
      steps: "Verified user identity. Confirmed BitLocker recovery screen. Contacted Tier 2 to retrieve recovery key from Active Directory.",
      action: "Escalated CRITICAL to Tier 2 / Security team for BitLocker key retrieval from AD. User standing by."
    },
    checks: [
      { key: "subject_critical", label: "Subject flags this as Critical or security-related", test: (f) => /critical|bitlocker|recovery|security/i.test(f.subject) },
      { key: "priority_critical", label: "Priority set to Critical (Accounting, payroll, fully locked out)", test: (f) => f.priority === "Critical" },
      { key: "bitlocker_described", label: "BitLocker and the recovery key prompt described clearly", test: (f) => /bitlocker|recovery key|48|blue screen/i.test(f.desc) },
      { key: "identity_verified", label: "CRITICAL: Identity verified before any action", test: (f) => /verif|identity|confirmed/i.test(f.desc) || /verif/i.test(f.steps) },
      { key: "business_impact", label: "Payroll / business impact noted", test: (f) => /payroll|accounting|report|business/i.test(f.desc) },
      { key: "escalated", label: "Escalated to Tier 2 / Security for key retrieval", test: (f) => /tier 2|escalat|security|active directory|AD/i.test(f.action) || /tier 2|escalat/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 10: BLACKSPIDER / WEB FILTER â”€â”€
  {
    type: "Web Filtering / Access",
    accentColor: "#3fb950",
    text: `A user calls and says she cannot get to any websites at all. When she tries to open a page, she gets a message that says "Blackspider" and the page is blocked. She says this started happening after she came back from lunch. She tried restarting her computer and it did not help. She is in the Marketing department and needs internet access to do her job.`,
    caller: { name: "Tina Rhodes", ext: "6631", dept: "Marketing", location: "Building B, Desk 11" },
    tip: `<strong>Tip:</strong> Blackspider (now part of Forcepoint) is a web filtering/proxy tool. When it blocks ALL sites for one user, it usually means their account got flagged, a proxy setting changed, or they need to re-authenticate with the web filter. This is different from a network outage â€” other users are likely fine. Note this is user-specific, not a building-wide issue.`,
    ideal: {
      subject: "All websites blocked by Blackspider web filter â€“ Marketing user fully down",
      priority: "High",
      category: "Network / Connectivity",
      impact: "User unable to work",
      desc: "User Tina Rhodes (Ext. 6631, Marketing, Building B Desk 11) reports all websites are blocked showing Blackspider filtering page. Issue started after returning from lunch. PC restarted â€” issue persists. Other users in area do not appear affected (isolated to this user). User cannot perform any job functions without internet access. Blackspider may have flagged account or proxy settings changed.",
      steps: "PC restarted â€” no change. Confirmed other nearby users are not affected. Checked proxy settings.",
      action: "Escalated to Tier 2 / Network team to review Blackspider/web filter settings for user account."
    },
    checks: [
      { key: "subject_blackspider", label: "Subject mentions Blackspider or web filter blocking", test: (f) => /blackspider|web filter|blocked|filter/i.test(f.subject) },
      { key: "error_noted", label: "Blackspider error documented in description", test: (f) => /blackspider/i.test(f.desc) },
      { key: "when_started", label: "Notes when it started (after lunch)", test: (f) => /lunch|afternoon|after|return/i.test(f.desc) },
      { key: "isolated", label: "Notes whether issue is user-specific or affecting others", test: (f) => /isolated|other users|not affect|only this|one user/i.test(f.desc) },
      { key: "priority_high", label: "Priority is High (no internet = cannot work)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "restart_noted", label: "Restart attempt documented", test: (f) => /restart|reboot/i.test(f.steps) || /restart|reboot/i.test(f.desc) },
      { key: "escalated", label: "Escalated to appropriate team", test: (f) => /escalat|tier 2|network|proxy/i.test(f.action) || /escalat/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 11: OUTLOOK WORK OFFLINE â”€â”€
  {
    type: "Email / Outlook",
    accentColor: "#ff6b35",
    text: `A user calls and says she cannot send or receive any emails. She says Outlook is open but nothing is going in or out. She noticed at the bottom of the Outlook window it says "Working Offline." She has an important email she needs to send to a vendor today. She does not know how it got into offline mode.`,
    caller: { name: "Angela Simmons", ext: "3345", dept: "Procurement", location: "Building C, Desk 8" },
    tip: `<strong>Tip:</strong> "Working Offline" in Outlook means the user accidentally disconnected from the mail server â€” it's usually one click to fix. Go to the Send/Receive tab in Outlook and click "Work Offline" to toggle it back on. ALWAYS document the exact error message at the bottom of the screen, even if it sounds simple. Simple issues have simple fixes but still need a paper trail.`,
    ideal: {
      subject: "Outlook stuck in Work Offline mode â€“ cannot send or receive email",
      priority: "Medium",
      category: "Email",
      impact: "User unable to work",
      desc: "User Angela Simmons (Ext. 3345, Procurement, Building C Desk 8) reports Outlook not sending or receiving emails. Status bar at bottom of Outlook displays 'Working Offline.' User does not know when or how it switched to offline mode. Has an urgent vendor email to send today. Network connectivity appears normal â€” issue is Outlook-specific.",
      steps: "Advised user to click Send/Receive tab > Work Offline button to toggle back to online mode. Email sync resumed.",
      action: "Issue resolved on call. User confirmed emails sending normally. Advised user what to look for if it happens again."
    },
    checks: [
      { key: "subject_outlook", label: "Subject mentions Outlook and the offline issue", test: (f) => /outlook|email|offline|work offline/i.test(f.subject) },
      { key: "error_msg", label: "Exact status bar message documented: 'Working Offline'", test: (f) => /working offline|work offline|offline/i.test(f.desc) },
      { key: "category_email", label: "Category set to Email", test: (f) => f.category === "Email" },
      { key: "symptoms", label: "Both symptoms noted: cannot send AND cannot receive", test: (f) => /send|receiv/i.test(f.desc) },
      { key: "fix_documented", label: "Fix documented (toggled Work Offline off)", test: (f) => /toggle|send.receive|work offline|click|tab/i.test(f.steps) || /toggle|send.receive/i.test(f.desc) },
      { key: "resolved", label: "Resolution status noted (resolved on call or escalated)", test: (f) => /resolv|fixed|working|escalat/i.test(f.action) },
    ]
  },

  // â”€â”€ SCENARIO 12: LAPTOP WON'T HOLD CHARGE â”€â”€
  {
    type: "Hardware / Battery",
    accentColor: "#a371f7",
    text: `A user calls saying his laptop battery drains very fast and won't hold a charge. He says the laptop used to last all day but now it dies within an hour even when fully charged. He needs the laptop to be mobile â€” he goes to meetings all day without access to a power outlet. The laptop is about 3 years old.`,
    caller: { name: "Robert Hines", ext: "7712", dept: "Sales", location: "Building A â€“ Mobile / No fixed desk" },
    tip: `<strong>Tip:</strong> Battery issues on older laptops (2+ years) are usually hardware failure â€” the battery needs to be replaced. Note the age of the laptop because that affects whether it's under warranty. A sales rep who is mobile all day with a dead battery = High priority, because they literally cannot do their job without it.`,
    ideal: {
      subject: "Laptop battery draining in 1 hour â€“ Sales rep mobile all day, no outlet access",
      priority: "High",
      category: "Hardware",
      impact: "User can partially work",
      desc: "User Robert Hines (Ext. 7712, Sales, mobile/no fixed desk) reports laptop battery draining fully within approximately 1 hour even after full charge. Previously lasted all day. Laptop is approximately 3 years old. User is mobile throughout the day attending meetings with no access to power outlets â€” battery failure significantly impacts ability to work. Likely battery end-of-life due to age.",
      steps: "Confirmed battery drains within 1 hour after full charge. Checked power settings â€” no unusual drain settings found.",
      action: "Ordering replacement battery or replacement laptop. Checking warranty status on device. Providing power adapter as temporary solution."
    },
    checks: [
      { key: "subject_battery", label: "Subject describes the battery / charge problem", test: (f) => /battery|charge|drain/i.test(f.subject) },
      { key: "category_hw", label: "Category set to Hardware", test: (f) => f.category === "Hardware" },
      { key: "timeframe", label: "Battery drain timeframe documented (drains in ~1 hour)", test: (f) => /1 hour|one hour|hour|drain/i.test(f.desc) },
      { key: "laptop_age", label: "Laptop age noted (relevant for warranty / replacement)", test: (f) => /3 year|three year|old|age|year/i.test(f.desc) },
      { key: "business_impact", label: "Mobile work impact documented (no outlet, meetings all day)", test: (f) => /mobile|meeting|outlet|all day/i.test(f.desc) },
      { key: "next_action", label: "Next action documented (battery replacement or warranty check)", test: (f) => /replac|warranty|order|swap/i.test(f.action) || /replac|warranty/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 13: LAPTOP SCREEN PIXELING â”€â”€
  {
    type: "Hardware / Display",
    accentColor: "#58a6ff",
    text: `A user calls in and describes her laptop screen as having strange pixel issues â€” parts of the screen show random colored dots and lines, especially in the bottom right corner. It started yesterday and is getting worse. She can still work but it is hard to read text in that area. She uses her laptop for design work and needs a clear screen.`,
    caller: { name: "Cassandra Lee", ext: "5523", dept: "Creative / Design", location: "Building B, Desk 19" },
    tip: `<strong>Tip:</strong> Screen pixeling or artifacts usually point to one of three things: a failing display, a loose or damaged video cable, or a failing GPU. For a laptop, most of these require a hardware repair or replacement. Note WHERE on the screen it is happening and whether it gets worse over time â€” that helps Tier 2 diagnose it faster.`,
    ideal: {
      subject: "Laptop screen pixeling / display artifacts â€“ Design user, worsening issue",
      priority: "Medium",
      category: "Hardware",
      impact: "User can partially work",
      desc: "User Cassandra Lee (Ext. 5523, Creative/Design, Building B Desk 19) reports laptop screen showing pixel artifacts â€” random colored dots and lines, concentrated in bottom right corner. Issue started yesterday and is progressively worsening. User can still partially work but screen damage impacts readability and her design work. No physical damage to laptop reported.",
      steps: "Restarted laptop â€” artifacts persist. Checked if external monitor resolves issue (would confirm if problem is screen vs. GPU).",
      action: "Dispatching tech for hardware assessment. Likely LCD screen or display cable replacement needed. Offering external monitor as temporary workaround."
    },
    checks: [
      { key: "subject_screen", label: "Subject describes the display / pixel issue", test: (f) => /pixel|screen|display|artifact/i.test(f.subject) },
      { key: "location_screen", label: "Location on screen documented (bottom right corner)", test: (f) => /bottom|corner|right|area|part/i.test(f.desc) },
      { key: "worsening", label: "Notes that issue is progressing / getting worse", test: (f) => /worse|progress|increas|getting/i.test(f.desc) },
      { key: "category_hw", label: "Category set to Hardware", test: (f) => f.category === "Hardware" },
      { key: "work_impact", label: "Impact on design work documented", test: (f) => /design|readab|work|impact/i.test(f.desc) },
      { key: "external_monitor", label: "External monitor test mentioned (good diagnostic step)", test: (f) => /external|monitor|second screen|display/i.test(f.steps) || /external|monitor/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 14: LAPTOP OVERHEATING â”€â”€
  {
    type: "Hardware / Thermal",
    accentColor: "#f0a500",
    text: `A user calls saying his laptop gets extremely hot and the fan runs at full speed all the time. Sometimes it shuts itself off without warning. It has been happening for about two weeks and is getting worse. He is worried about losing his work when it shuts down unexpectedly. He has not spilled anything on it and it doesn't look physically damaged.`,
    caller: { name: "Jerome Banks", ext: "4408", dept: "Finance", location: "Building A, Desk 33" },
    tip: `<strong>Tip:</strong> Laptops that overheat and shut down unexpectedly are a data-loss risk â€” treat this seriously. Common causes: clogged fan vents (dust), thermal paste failure, or a failing fan. The unexpected shutdowns are the most critical detail because they mean the user can lose unsaved work at any time. This needs a tech to physically inspect the device.`,
    ideal: {
      subject: "Laptop overheating and shutting down unexpectedly â€“ Finance user, data loss risk",
      priority: "High",
      category: "Hardware",
      impact: "User can partially work",
      desc: "User Jerome Banks (Ext. 4408, Finance, Building A Desk 33) reports laptop overheating with fan running at maximum speed constantly. Laptop shuts down without warning, causing potential data loss. Issue has been occurring for approximately two weeks and is worsening. No physical damage or liquid spills reported. Unexpected shutdowns are occurring during active work sessions. High risk of data loss.",
      steps: "Advised user to save work frequently and avoid running intensive programs. Checked vents for visible dust blockage.",
      action: "Dispatching tech to inspect fan, vents, and thermal components. Possible fan replacement or thermal paste reapplication needed."
    },
    checks: [
      { key: "subject_heat", label: "Subject mentions overheating and the shutdown risk", test: (f) => /overheat|heat|shut|thermal/i.test(f.subject) },
      { key: "shutdowns", label: "Unexpected shutdowns documented as key symptom", test: (f) => /shut|shutdown|turn off|power off/i.test(f.desc) },
      { key: "data_risk", label: "Data loss risk acknowledged in ticket", test: (f) => /data|loss|lose|unsaved|work lost/i.test(f.desc) || /data/i.test(f.action) },
      { key: "duration", label: "How long it has been happening documented (2 weeks)", test: (f) => /two week|2 week|week|started/i.test(f.desc) },
      { key: "priority_high", label: "Priority is High (data loss risk + worsening)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "next_action", label: "Tech dispatch or physical inspection documented", test: (f) => /dispatch|tech|inspect|fan|thermal/i.test(f.action) || /dispatch|tech/i.test(f.desc) },
    ]
  },

  // â”€â”€ SCENARIO 15: TICKET STATUS CHECK â”€â”€
  {
    type: "Ticket Status / Follow-Up",
    accentColor: "#3fb950",
    text: `A frustrated user calls and says she opened a ticket four days ago about her printer not working and nobody has contacted her. She does not have the ticket number. She says she was told a tech would come out within 48 hours and that never happened. She still cannot print and needs to print documents for a meeting tomorrow morning.`,
    caller: { name: "Patricia Owens", ext: "8821", dept: "Legal", location: "Building C, Desk 2" },
    tip: `<strong>Tip:</strong> Ticket status calls are actually two tickets in one: (1) a follow-up note on the original ticket, and (2) possibly a new escalation. Your job is to look up the original ticket, update it, and make sure someone follows up. Never tell a user "I'll pass the message along" without documenting it. The meeting tomorrow = urgent, bump the priority.`,
    ideal: {
      subject: "Ticket follow-up: Printer issue unresolved after 4 days â€“ Legal, meeting tomorrow",
      priority: "High",
      category: "Hardware",
      impact: "User unable to work",
      desc: "User Patricia Owens (Ext. 8821, Legal, Building C Desk 2) called to follow up on printer ticket submitted 4 days ago. User was told tech would respond within 48 hours â€” no contact received. Original ticket located in system (search by user name/dept). User still unable to print. Has documents needed for meeting tomorrow morning. User is frustrated by lack of follow-through.",
      steps: "Located original ticket in system. Updated ticket with follow-up call. Notified assigned tech and supervisor of SLA breach.",
      action: "Escalated to tech supervisor â€” SLA of 48 hours was breached. Tech scheduled to visit before end of day today. User informed of updated ETA."
    },
    checks: [
      { key: "subject_followup", label: "Subject identifies this as a follow-up on an existing issue", test: (f) => /follow|status|unresolved|update|4 day/i.test(f.subject) },
      { key: "original_ticket", label: "Notes that original ticket was looked up in the system", test: (f) => /original|previous|located|found|system|look up/i.test(f.desc) || /original|located/i.test(f.steps) },
      { key: "sla_breach", label: "SLA breach documented (48-hour promise not kept)", test: (f) => /sla|48 hour|breach|promise|told|no contact/i.test(f.desc) },
      { key: "urgency", label: "Meeting tomorrow urgency noted", test: (f) => /meeting|tomorrow|morning|urgent/i.test(f.desc) },
      { key: "priority_high", label: "Priority escalated to High (overdue + deadline)", test: (f) => f.priority === "High" || f.priority === "Critical" },
      { key: "escalated_supervisor", label: "Escalated to supervisor or tech lead for SLA breach", test: (f) => /supervisor|escalat|lead|manager|breach/i.test(f.action) || /supervisor|escalat/i.test(f.steps) },
      { key: "user_informed", label: "User informed of next steps / updated ETA", test: (f) => /inform|advised|told user|eta|schedule|today/i.test(f.action) },
    ]
  }
];

let currentScenario = 0;
let totalScore = 0;
let maxPossible = 0;
let hintUsed = false;

function getFields() {
  return {
    subject: document.getElementById('f-subject').value.trim(),
    priority: document.getElementById('f-priority').value,
    category: document.getElementById('f-category').value,
    impact: document.getElementById('f-impact').value,
    desc: document.getElementById('f-desc').value.trim(),
    steps: document.getElementById('f-steps').value.trim(),
    action: document.getElementById('f-action').value.trim(),
  };
}

function clearForm() {
  ['f-subject','f-priority','f-category','f-impact','f-desc','f-steps','f-action'].forEach(id => {
    const el = document.getElementById(id);
    el.value = el.tagName === 'SELECT' ? '' : '';
  });
  document.getElementById('feedback-panel').classList.remove('show');
  document.getElementById('btn-next').style.display = 'none';
}

function showHint() {
  hintUsed = true;
  const s = scenarios[currentScenario];
  alert(`ðŸ’¡ HINT\n\nSubject should mention: the issue + department or urgency\nPriority: ${s.ideal.priority}\nCategory: ${s.ideal.category}\nMake sure your description answers: WHO, WHAT, WHEN, WHAT WAS TRIED.`);
}

function submitTicket() {
  const f = getFields();
  const s = scenarios[currentScenario];
  const checks = s.checks;

  let passed = 0;
  const results = checks.map(c => {
    const ok = c.test(f);
    if (ok) passed++;
    return { label: c.label, ok };
  });

  // Basic completeness checks
  const missingRequired = [];
  if (!f.subject) missingRequired.push('Subject');
  if (!f.priority) missingRequired.push('Priority');
  if (!f.category) missingRequired.push('Category');
  if (!f.desc) missingRequired.push('Description');

  if (missingRequired.length > 0) {
    alert(`Please fill in required fields: ${missingRequired.join(', ')}`);
    return;
  }

  const scorePercent = Math.round((passed / checks.length) * 100);
  const pointsEarned = hintUsed ? Math.max(0, passed - 1) : passed;
  totalScore += pointsEarned;
  maxPossible += checks.length;
  hintUsed = false;

  document.getElementById('header-score').textContent = totalScore;

  // Build feedback
  const panel = document.getElementById('feedback-panel');
  panel.classList.add('show');

  let circleClass = scorePercent >= 80 ? 'score-a' : scorePercent >= 55 ? 'score-b' : 'score-c';
  document.getElementById('score-circle-wrap').innerHTML = `<div class="score-circle ${circleClass}">${scorePercent}%</div><br>`;

  const list = document.getElementById('check-list');
  list.innerHTML = results.map(r => `
    <li class="${r.ok ? 'pass' : 'fail'}">
      <span class="icon">${r.ok ? 'âœ“' : 'âœ—'}</span>
      <span>${r.label}</span>
    </li>
  `).join('');

  // Model answer
  document.getElementById('model-answer').innerHTML = `
    <h4>âœ¦ Example of a Strong Ticket</h4>
    <div class="model-field"><span class="mf-label">Subject: </span><span class="mf-val">${s.ideal.subject}</span></div>
    <div class="model-field"><span class="mf-label">Priority: </span><span class="mf-val">${s.ideal.priority}</span></div>
    <div class="model-field"><span class="mf-label">Category: </span><span class="mf-val">${s.ideal.category}</span></div>
    <div class="model-field"><span class="mf-label">Impact: </span><span class="mf-val">${s.ideal.impact}</span></div>
    <div class="section-divider"></div>
    <div class="model-field"><span class="mf-label">Description: </span><span class="mf-val">${s.ideal.desc}</span></div>
    <div class="model-field"><span class="mf-label">Steps Taken: </span><span class="mf-val">${s.ideal.steps}</span></div>
    <div class="model-field"><span class="mf-label">Next Action: </span><span class="mf-val">${s.ideal.action}</span></div>
  `;

  document.getElementById('btn-next').style.display = 'inline-block';
  panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function nextScenario() {
  currentScenario++;
  if (currentScenario >= scenarios.length) {
    showComplete();
    return;
  }
  loadScenario();
  clearForm();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function loadScenario() {
  const s = scenarios[currentScenario];
  document.getElementById('scenario-num').textContent = currentScenario + 1;
  document.getElementById('scenario-total').textContent = scenarios.length;
  document.getElementById('ticket-type-badge').textContent = s.type;
  document.querySelector('.scenario-card').style.borderLeftColor = s.accentColor;
  document.getElementById('ticket-type-badge').style.color = s.accentColor;
  document.getElementById('scenario-text').textContent = s.text;
  document.getElementById('tip-box').innerHTML = s.tip;

  const callerEl = document.getElementById('caller-info');
  const c = s.caller;
  callerEl.innerHTML = `
    <div class="info-chip"><strong>Caller:</strong> ${c.name}</div>
    <div class="info-chip"><strong>Ext:</strong> ${c.ext}</div>
    <div class="info-chip"><strong>Dept:</strong> ${c.dept}</div>
    <div class="info-chip"><strong>Location:</strong> ${c.location}</div>
  `;

  const pct = ((currentScenario) / scenarios.length) * 100;
  document.getElementById('progress-bar').style.width = pct + '%';
  document.getElementById('feedback-panel').classList.remove('show');
  document.getElementById('btn-next').style.display = 'none';
}

function showComplete() {
  document.getElementById('practice-section').style.display = 'none';
  document.getElementById('complete-screen').style.display = 'block';
  document.getElementById('progress-bar').style.width = '100%';

  const pct = Math.round((totalScore / maxPossible) * 100);
  document.getElementById('final-score-display').textContent = pct + '%';
  document.getElementById('header-score').textContent = totalScore;

  let msg = pct >= 80
    ? "Excellent work! You have strong ticket writing skills. Keep it up!"
    : pct >= 55
    ? "Good effort! Review the model answers for the areas you missed and try again."
    : "Keep practicing! Focus on including WHO, WHAT, WHEN, and WHAT WAS TRIED in every ticket.";
  document.getElementById('final-message').textContent = msg;
}

function restartApp() {
  currentScenario = 0;
  totalScore = 0;
  maxPossible = 0;
  document.getElementById('header-score').textContent = 0;
  document.getElementById('practice-section').style.display = 'block';
  document.getElementById('complete-screen').style.display = 'none';
  loadScenario();
  clearForm();
}

// Init
loadScenario();
</script>
</body>
</html>
